#!/bin/sh
if [[ -z $1 ]]; then
  exit 1
fi
run_command="entr -r generate_tags"
pid=$(ps -ef | grep "$run_command" | awk '$8=="entr"{print $2}')
if [[ ! -z $pid ]]; then
  kill $pid
  if [[ $1 == "kill" ]]; then
    exit 0
  fi
fi

git ls-files | grep "$1" | $run_command &

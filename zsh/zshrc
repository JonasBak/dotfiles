if command -v tmux>/dev/null; then
    [ -z $TMUX ] && exec tmux
  else
    echo "tmux not installed, run './install tmux' in $DOTFILES to install"
fi

# Settings
HISTFILE=~/.zsh_history
SAVEHIST=5000
setopt inc_append_history # To save every command before it is executed
setopt hist_ignore_all_dups
setopt share_history
setopt inc_append_history

export VISUAL=vim

stty -ixon

zmodload zsh/complist # Needed for reverse-menu-complete binding

# Plugins
source_plugin() {
  [[ -d $ZSH_PLUGINS/$1 ]] && source $ZSH_PLUGINS/$1/$1.plugin.zsh
}

source_plugin zsh-autosuggestions
source_plugin zsh-syntax-highlighting
source_plugin zsh-completions
source_plugin zsh-history-substring-search

export fpath=($ZSH_PLUGINS/zsh-completions/src $DOTFILES/local/zsh_completions $fpath)

source $DOTFILES/zsh/scripts/prompt.sh
source $DOTFILES/zsh/scripts/bindings.sh
source $DOTFILES/zsh/scripts/completions.zsh

[ -f ~/.fzf.zsh ] && source ~/.fzf.zsh
